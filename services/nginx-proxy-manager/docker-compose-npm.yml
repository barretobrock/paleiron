# Ports
#   5001 - abulmisk
#   5002 - viktor
#   5003 - cah
#   5004 - dizzy
#   5005
#   5006
#   5007
#   5008
#   5009

version: '3'
services:
  nginxpm:
    image: 'jc21/nginx-proxy-manager:latest'
    container_name: 'nginxpm'
    restart: unless-stopped
    ports:
      - '80:80'
      - '81:81'
      - '443:443'
      - '3000:3000'             # Grafana
      - '3001:3001'             # Umami
      - '5001-5009:5001-5009'   # Flask apps
      - '8086:8086'             # Influxdb
    volumes:
      - ./data:/data
      - ./letsencrypt:/etc/letsencrypt

  umami:
    image: 'docker.umami.dev/umami-software/umami:mysql-latest'
    container_name: 'umami'
    ports:
      - '3001:3001'
    environment:
      - PORT=3001
networks:
  default:
    external:
      name: okr-network
